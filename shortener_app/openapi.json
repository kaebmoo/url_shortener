{"openapi":"3.1.0","info":{"title":"URL Shortener API","description":"API for shortening URLs and managing shortened URLs","version":"1.0.0"},"paths":{"/check-phishing/":{"get":{"tags":["url"],"summary":"Check Phishing","description":"add background tasks for update phishing urls","operationId":"check_phishing_check_phishing__get","parameters":[{"name":"url","in":"query","required":true,"schema":{"type":"string","title":"Url"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","description":"root api","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/about":{"get":{"summary":"Read About","description":"about page","operationId":"read_about_about_get","responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/api/register_api_key":{"post":{"tags":["api key"],"summary":"Register Api Key","description":"register api key","operationId":"register_api_key_api_register_api_key_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIKeyCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/deactivate_api_key":{"post":{"tags":["api key"],"summary":"Deactivate Api Key","description":"deactivate api key","operationId":"deactivate_api_key_api_deactivate_api_key_post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"type":"string","title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIKeyDelete"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/refresh_token":{"post":{"tags":["api key"],"summary":"Refresh Token","description":"refresh jwt token","operationId":"refresh_token_api_refresh_token_post","parameters":[{"name":"refresh_token","in":"query","required":true,"schema":{"type":"string","title":"Refresh Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/capture_screen":{"post":{"summary":"Capture Screen","description":"capture screen save to file\nargs:\n    a) url key","operationId":"capture_screen_capture_screen_post","parameters":[{"name":"url_key","in":"query","required":true,"schema":{"type":"string","title":"Url Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/preview_url":{"get":{"summary":"Preview Url","description":"call capture screen return preview.thml\nargs:\n    a) url\n    b) heading text h1, h3 [option]","operationId":"preview_url_preview_url_get","parameters":[{"name":"url","in":"query","required":true,"schema":{"type":"string","title":"Url"}},{"name":"heading_text_h1","in":"query","required":false,"schema":{"type":"string","title":"Heading Text H1"}},{"name":"heading_text_h3","in":"query","required":false,"schema":{"type":"string","title":"Heading Text H3"}},{"name":"token","in":"header","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/{url_key}":{"get":{"summary":"Forward To Target Url","description":"forward short url to target url\npreview target url\nargs:\n    a) url key","operationId":"forward_to_target_url__url_key__get","parameters":[{"name":"url_key","in":"path","required":true,"schema":{"type":"string","title":"Url Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/url":{"post":{"tags":["url"],"summary":"Create Url","description":"create short url\nargs:\n    a) target url\n    b) api key","operationId":"create_url_url_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/URLBase"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/URLInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/url/guest":{"post":{"tags":["url"],"summary":"Create Url Guest","description":"create short url for guest (without API key)\nargs:\n    a) target url","operationId":"create_url_guest_url_guest_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/URLGuest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/URLInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/user/info":{"get":{"tags":["info"],"summary":"Get Url Count","description":"Query the count of URLs created with the given API key\nargs:\n    a) api key","operationId":"get_url_count_user_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/user/urls":{"get":{"tags":["info"],"summary":"Get User Url","description":"Query the database to get the URLs\nargs:\n    a) api key","operationId":"get_user_url_user_urls_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/user/url/status":{"post":{"tags":["info"],"summary":"Get Url Scan Status","description":"get malware information, scan results\nargs:\n    a) secret key\n    b) target url\n    c) scan type: name of scan vendor ex. google [option]\n    d) api key","operationId":"get_url_scan_status_user_url_status_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_get_url_scan_status_user_url_status_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ScanStatus"},"type":"array","title":"Response Get Url Scan Status User Url Status Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/{secret_key}":{"get":{"tags":["admin"],"summary":"Administration Info","description":"get url information \nargs:\n    a) secret key of url\n    b) api key","operationId":"administration_info_admin__secret_key__get","parameters":[{"name":"secret_key","in":"path","required":true,"schema":{"type":"string","title":"Secret Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/URLInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin"],"summary":"Delete Url","description":"delete url in database","operationId":"delete_url_admin__secret_key__delete","parameters":[{"name":"secret_key","in":"path","required":true,"schema":{"type":"string","title":"Secret Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"APIKeyCreate":{"properties":{"api_key":{"type":"string","title":"Api Key"},"role_id":{"type":"integer","title":"Role Id"}},"type":"object","required":["api_key","role_id"],"title":"APIKeyCreate"},"APIKeyDelete":{"properties":{"api_key":{"type":"string","title":"Api Key"}},"type":"object","required":["api_key"],"title":"APIKeyDelete"},"Body_get_url_scan_status_user_url_status_post":{"properties":{"secret_key":{"type":"string","title":"Secret Key"},"target_url":{"type":"string","title":"Target Url"},"scan_type":{"type":"string","title":"Scan Type"}},"type":"object","required":["secret_key","target_url"],"title":"Body_get_url_scan_status_user_url_status_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ScanStatus":{"properties":{"url":{"type":"string","title":"Url"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"result":{"type":"string","title":"Result"},"scan_type":{"type":"string","title":"Scan Type"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["url","result","scan_type","timestamp"],"title":"ScanStatus"},"URLBase":{"properties":{"target_url":{"type":"string","title":"Target Url"},"custom_key":{"type":"string","title":"Custom Key"}},"type":"object","required":["target_url"],"title":"URLBase"},"URLGuest":{"properties":{"target_url":{"type":"string","title":"Target Url"}},"type":"object","required":["target_url"],"title":"URLGuest"},"URLInfo":{"properties":{"target_url":{"type":"string","title":"Target Url"},"custom_key":{"type":"string","title":"Custom Key"},"is_active":{"type":"boolean","title":"Is Active"},"clicks":{"type":"integer","title":"Clicks"},"url":{"type":"string","title":"Url"},"admin_url":{"type":"string","title":"Admin Url"},"secret_key":{"type":"string","title":"Secret Key"},"qr_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Qr Code","description":"Base64 encoded QR code image for the URL"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"favicon_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Favicon Url"}},"type":"object","required":["target_url","is_active","clicks","url","admin_url","secret_key"],"title":"URLInfo","description":"สำหรับ return ข้อมูล URL Information "},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"ApiKeyAuth":{"type":"apiKey","in":"header","name":"X-API-KEY"}}},"security":[{"ApiKeyAuth":[]}]}